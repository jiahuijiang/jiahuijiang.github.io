const confettiBaseYSpeed=.5,xWindSpeedMultiplier=.03,yWindSpeedMultiplier=.05,confetti=[];let sketchConfetti=function(t){function e(){return{speedX:t.mouseX-t.pmouseX,speedY:t.mouseY-t.pmouseY>0?t.mouseY-t.pmouseY:2*(t.mouseY-t.pmouseY)}}t.setup=function(){const e=t.max(window.innerHeight,window.innerWidth),s=Number(document.querySelector(".input").getAttribute("confetti-canvas-length")??e);t.createCanvas(s,s);for(let t=0;t<s/2;t++)confetti.push(new i)},t.draw=function(){const e=Number(document.querySelector(".input").getAttribute("confetti-opacity")??"0");t.background(e,200);for(const t of confetti)t.show()};class i{confettiColors=[t.color(168,100,253),t.color(41,205,255),t.color(120,255,68),t.color(255,113,141),t.color(253,255,106)];constructor(){this.time=t.random(1,100),this.x=t.random(t.width),this.y=t.random(-50,t.width),this.xSpeedFromWind=0,this.ySpeedFromWind=0,this.r=t.random(5,12),this.ySpeed=confettiBaseYSpeed*Math.log(this.r,2),this.shape=Math.floor(t.random(3))+1,this.color=this.confettiColors[Math.floor(t.random(this.confettiColors.length))]}show(){t.push(),t.translate(this.x,this.y),t.mouseX<t.width&&t.mouseX>0&&t.mouseY<t.height&&t.mouseY>0&&(t.abs(this.x-t.mouseX)<100&&(this.ySpeedFromWind=e().speedY/(t.log(t.abs(this.y-t.mouseY)+1)+1)*t.sqrt(t.abs(t.abs(this.x-t.mouseX)-100))*yWindSpeedMultiplier),t.abs(this.y-t.mouseY)<100&&(this.xSpeedFromWind=e().speedX/(t.log(t.abs(this.x-t.mouseX)+1)+1)*t.sqrt(t.abs(t.abs(this.y-t.mouseY)-100))*xWindSpeedMultiplier)),this.xSpeedFromWind*=.99,t.translate(0,this.ySpeed),t.rotate(this.time),t.rectMode(t.CENTER),t.scale(t.cos(this.time/4),t.sin(this.time/4)),t.noStroke(),t.fill(this.color),1===this.shape?t.circle(0,0,this.r):2===this.shape?t.rect(0,0,this.r,this.r):t.triangle(0,0,this.r,0,this.r/2,this.r),t.pop(),this.time=this.time+.1,this.y+=this.ySpeed+this.ySpeedFromWind,this.x+=this.xSpeedFromWind,(this.y>t.height||this.x<0||this.x>t.width)&&(this.x=t.random(t.width),this.y=t.random(-100,0),this.xSpeedFromWind=0,this.ySpeedFromWind=0)}}};new p5(sketchConfetti,"confetti-parent");